#include "contiki.h"
#include "CuTest.h"

int16_t inputpoints[] = {
  -2,0,19, -2,0,19, -2,0,19, -2,0,19, -2,0,19, -2,0,19, -2,0,19, -3,0,20, -3,0,20, -3,0,20, -3,0,20, -3,0,20, -3,0,20, -3,
0,20, -3,0,20, -3,0,20, -4,0,20, -4,0,20, -3,0,20, -3,0,20, -2,1,19, -1,2,18, -1,2,17, 0,2,18, 0,2,17, 0,2,17, 0,3,16, 
1,3,16, 3,3,16, 3,3,16, 4,3,16, 4,3,16, 4,3,16, 4,3,17, 3,3,16, 3,3,16, 4,3,16, 4,3,16, 5,3,16, 5,2,16, 5,1,16, 5,0,16, 
6,1,17, 6,1,19, 7,2,20, 9,3,20, 10,4,20, 10,5,20, 13,7,20, 13,8,20, 13,8,20, 13,9,19, 13,9,18, 13,9,16, 13,10,16, 13,10,
14, 13,11,13, 13,13,12, 13,13,11, 12,13,10, 11,13,10, 10,13,11, 8,13,11, 6,12,11, 5,11,12, 3,10,12, 2,10,12, 0,10,12, 0,
10,13, -1,10,14, -2,9,16, -3,9,19, -4,9,22, -6,8,26, -8,6,29, -10,6,32, -10,6,32, -8,6,32, -6,7,32, -5,9,31, -4,10,28, 
-3,10,28, -1,10,27, 0,10,27, 0,10,26, 0,10,25, 0,10,24, 0,10,23, 0,9,21, 0,9,20, 0,9,19, 0,9,18, 0,8,17, 0,8,16, 0,8,17, 
0,8,17, 0,8,18, 0,9,16, 0,8,16,
};


void TestGesture(CuTest* tc)
{
  // test gesture
  gesture_init(0);
  for(int i = 0; i <sizeof(inputpoints)/sizeof(int16_t); i++)
  {
    int16_t k = inputpoints[i];
    inputpoints[i] = inputpoints[i] * 6.4;
    printf("%d(%d) ", inputpoints[i], k);
  }

  for(int i = 0; i < sizeof(inputpoints) /sizeof(int16_t)/ 3; i+=3)
  {
    gesture_processdata(&inputpoints[i * 3]);
  }
}

CuSuite* GestureGetSuite(void)
{
	CuSuite* suite = CuSuiteNew("Gesture Test");

  SUITE_ADD_TEST(suite, TestGesture);

  return suite;
}
